<!DOCTYPE html>
<html lang=en>
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="BitCoin Basis* Block Chain Version 1.0 * What is Bitcoin?     * Bitcoin is a cryptocurrency. It is a decentralized digital currency without a central bank or single administrator that can be sent from">
<meta name="keywords" content="区块链">
<meta property="og:type" content="article">
<meta property="og:title" content="The Story of Block Chain">
<meta property="og:url" content="http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/index.html">
<meta property="og:site_name" content="DengShizhi">
<meta property="og:description" content="BitCoin Basis* Block Chain Version 1.0 * What is Bitcoin?     * Bitcoin is a cryptocurrency. It is a decentralized digital currency without a central bank or single administrator that can be sent from">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-02-09T14:14:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The Story of Block Chain">
<meta name="twitter:description" content="BitCoin Basis* Block Chain Version 1.0 * What is Bitcoin?     * Bitcoin is a cryptocurrency. It is a decentralized digital currency without a central bank or single administrator that can be sent from">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>The Story of Block Chain</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives">archives</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2019/11/06/胡言乱语/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&text=The Story of Block Chain"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&is_video=false&description=The Story of Block Chain"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=The Story of Block Chain&body=Check out this article: http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&name=The Story of Block Chain&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#BitCoin_Basis"><span class="toc-number">1.</span> <span class="toc-text">BitCoin Basis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ethereum"><span class="toc-number">2.</span> <span class="toc-text">Ethereum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cosmos"><span class="toc-number">3.</span> <span class="toc-text">cosmos</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#consensus"><span class="toc-number">4.</span> <span class="toc-text">consensus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#True_Chain"><span class="toc-number">5.</span> <span class="toc-text">True Chain</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        The Story of Block Chain
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">DengShizhi</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-02-07T08:09:00.000Z" itemprop="datePublished">2020-02-07</time>
        
        (Updated: <time datetime="2020-02-09T14:14:00.000Z" itemprop="dateModified">2020-02-09</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/区块链/">区块链</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/区块链/">区块链</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="BitCoin_Basis">BitCoin Basis</h2><pre><code>* <span class="type">Block</span> <span class="type">Chain</span> <span class="type">Version</span> <span class="number">1</span>.<span class="number">0</span>
* <span class="type">What</span> <span class="keyword">is</span> <span class="type">Bitcoin</span>?
    * <span class="type">Bitcoin</span> <span class="keyword">is</span> a cryptocurrency. <span class="type">It</span> <span class="keyword">is</span> a decentralized digital currency <span class="keyword">without</span> a central bank <span class="keyword">or</span> single administrator that can be sent <span class="keyword">from</span> user to user on the peer-to-peer bitcoin network <span class="keyword">without</span> the need <span class="keyword">for</span> intermediaries.(<span class="keyword">from</span> https://en.wikipedia.org/wiki/<span class="type">Bitcoin</span>)
    * cryptocurrency
    * decentralized
    * peer-to-peer bitcoin network
* <span class="type">Brief</span> history
    * <span class="number">2008</span> - <span class="type">The</span> <span class="type">Bitcoin</span> <span class="type">White</span> <span class="type">Paper</span> <span class="keyword">is</span> <span class="type">Released</span>
    * <span class="type">Jan</span> <span class="number">2009</span> - <span class="type">First</span> <span class="type">Bitcoin</span> <span class="type">Block</span> <span class="keyword">is</span> <span class="type">Mined</span>
    * <span class="type">Jan</span> <span class="number">2009</span> - <span class="type">First</span> <span class="type">Bitcoin</span> <span class="type">Transaction</span>
    * <span class="type">Oct</span> <span class="number">2009</span> - <span class="type">First</span> listed <span class="type">Dollar</span> to <span class="type">Bitcoin</span> <span class="type">Exchage</span> <span class="type">Rate</span>
    * <span class="type">May</span> <span class="number">2010</span> - <span class="type">First</span> <span class="type">Real</span> <span class="type">World</span> <span class="type">Bitcoin</span> <span class="type">Purchase</span>
    * <span class="type">Feb</span> <span class="number">2011</span> - <span class="type">Silk</span> <span class="type">Road</span> <span class="type">Marketplace</span> <span class="type">Opens</span>
    * <span class="type">Nov</span> <span class="number">2013</span> - <span class="type">Price</span> hits $<span class="number">1242</span> <span class="keyword">for</span> a single <span class="type">Bitcoin</span>
    * <span class="type">Feb</span> <span class="number">2014</span> - <span class="type">Mt</span>.<span class="type">Gox</span> gets hacked, $<span class="number">450</span> million missing 
    * <span class="type">Dec</span> <span class="number">2014</span> - <span class="type">Microsoft</span> adds <span class="type">Bitcoin</span> <span class="type">Payments</span> to <span class="type">Xbox</span> live
* <span class="type">Cryptographic</span> hash function (<span class="type">Backbone</span> <span class="keyword">of</span> the <span class="type">Bitcoin</span> <span class="type">Network</span>)
    * <span class="type">MD5</span>(<span class="type">MD4</span>);<span class="type">SHA</span>-<span class="number">256</span>(<span class="type">SHA</span>-<span class="number">1</span>);<span class="type">RIPEMD</span>,<span class="type">BLAKE</span>,<span class="type">Skein</span>
    * first application: <span class="type">Digital</span> <span class="type">Signatures</span>
    * puzzle friendly: difficult to solve,easy to verify    
    * <span class="type">Cryptographic</span> <span class="keyword">is</span> very important!
        * determined: same input same output
        * computationally efficient
        * <span class="type">Collision</span> resistance: different inputs,different output. hard to find two inputs that actually map to same output.
        * hiding information about input
        * <span class="type">Digest</span> should look random
    * ref1: https://youtu.be/<span class="number">0</span>WiTaBI82Mc
* <span class="type">Digital</span> <span class="type">Signature</span>
    * a digital signature scheme <span class="keyword">is</span> a triple <span class="keyword">of</span> probabilistic polynomial time algorithms, (G, S, V), satisfying:
        G (key-generator) generates a public key (pk), <span class="keyword">and</span> a corresponding private key (sk), on input <span class="number">1</span>n, where n <span class="keyword">is</span> the security parameter.
        S (signing) returns a tag, t, on the inputs: the private key (sk), <span class="keyword">and</span> a <span class="type">string</span> (x).
        V (verifying) outputs accepted <span class="keyword">or</span> rejected on the inputs: the public key (pk), a <span class="type">string</span> (x), <span class="keyword">and</span> a tag (t).
    * <span class="keyword">ref</span>: https://en.wikipedia.org/wiki/<span class="type">Digital_signature</span>
* <span class="type">Merkle</span> <span class="type">Tree</span>
    * <span class="type">In</span> cryptography <span class="keyword">and</span> computer science, a hash tree <span class="keyword">or</span> <span class="type">Merkle</span> tree <span class="keyword">is</span> a tree <span class="keyword">in</span> which every leaf node <span class="keyword">is</span> labelled <span class="keyword">with</span> the cryptographic hash <span class="keyword">of</span> a data <span class="keyword">block</span>, <span class="keyword">and</span> every non-leaf node <span class="keyword">is</span> labelled <span class="keyword">with</span> the hash <span class="keyword">of</span> the labels <span class="keyword">of</span> its child nodes. 
    * <span class="type">Block</span> chain <span class="keyword">is</span> a linked list <span class="keyword">using</span> hash pointers.
    * <span class="type">Proof</span> <span class="keyword">of</span> membership (<span class="type">Proof</span> <span class="keyword">of</span> inclusion):
        * <span class="type">Merkle</span> proof: find the position <span class="keyword">of</span> <span class="type">TX</span>,<span class="keyword">and</span> calculate the root hash. <span class="type">Make</span> the validation <span class="keyword">of</span> caculated root hash. <span class="type">Complexity</span>: O(log(n))
    * <span class="type">Proof</span> <span class="keyword">of</span> non-membership:
        * <span class="type">Send</span> all the struction <span class="keyword">of</span> trees to light node, check it. complexity: O(n)
        * <span class="type">Sorted</span> <span class="type">Merkle</span> <span class="type">Tree</span>: <span class="keyword">is</span> <span class="keyword">not</span> used <span class="keyword">in</span> <span class="type">Bitcoin</span>,because <span class="type">Bitcoin</span> donot need proof <span class="keyword">of</span> non-membership. <span class="type">Complexity</span>: O(log(n))
    * <span class="keyword">ref</span>: https://en.wikipedia.org/wiki/<span class="type">Merkle_tree</span>
* <span class="type">UTXO</span>
    * <span class="type">UTXO</span>: <span class="type">Unspent</span> <span class="type">Transaction</span> <span class="type">Output</span>
    * goal: check double spending 
    * a <span class="type">TX</span> has many inputs <span class="keyword">and</span> many outputs,but which statisfies: 
        * all the <span class="type">TX</span> come <span class="keyword">from</span> coinbase
        * all the <span class="type">TX</span> inputs come <span class="keyword">from</span> <span class="type">UTXO</span> outputs <span class="keyword">of</span> one <span class="keyword">or</span> many <span class="type">TXs</span> <span class="keyword">except</span> <span class="type">TX</span> <span class="keyword">of</span> coinbase
        * total inputs = total outputs
* <span class="type">Script</span> model <span class="keyword">in</span> <span class="type">Bitcoin</span> 
    * only stack: <span class="type">LIFO</span>, <span class="type">Last</span> <span class="type">In</span> <span class="type">First</span> <span class="type">Out</span>. https://zh.wikipedia.org/wiki/%<span class="type">E5</span>%<span class="type">A0</span>%<span class="number">86</span>%<span class="type">E6</span>%<span class="type">A0</span>%<span class="number">88</span>
    * <span class="type">P2PKH</span>(<span class="type">Pay</span> to <span class="type">Public</span> <span class="type">Key</span> <span class="type">Hash</span>) <span class="keyword">is</span> most common. <span class="type">P2PKH</span>: &lt;sig&gt; &lt;<span class="type">PubK</span>&gt; <span class="type">DUP</span> <span class="type">HASH160</span> &lt;<span class="type">PubKHash</span>&gt; <span class="type">EQUALVERIFY</span> <span class="type">CHECKSIG</span> <span class="keyword">ref</span>:
    * <span class="type">P2SH</span>(<span class="type">Pay</span> to script hash): used <span class="keyword">in</span> <span class="type">MultiSig</span>. <span class="type">P2SH</span>: <span class="type">HASH160</span> <span class="type">PUSHDATA</span>(goal script hash) <span class="type">EQUAL</span> <span class="keyword">ref</span>:https://en.bitcoin.it/wiki/<span class="type">Pay_to_script_hash</span>
    * <span class="type">Proof</span> <span class="keyword">of</span> <span class="type">Burn</span>: <span class="type">First</span> scene：<span class="type">Burn</span> <span class="type">Bitcoin</span> <span class="keyword">and</span> get some <span class="type">AltCoins</span>(<span class="type">Alternative</span> <span class="type">Coin</span>). <span class="type">Second</span> scene: digital commitment(hash the commitment content)
    * <span class="keyword">ref</span> https://en.bitcoin.it/wiki/<span class="type">Script</span>
    * <span class="type">CHECKMULTISIG</span>:has a bug,so push a <span class="number">0</span> to stack first.
* <span class="type">Security</span> <span class="keyword">in</span> <span class="type">Bitcoin</span>
    * <span class="type">Cryptography</span>: source <span class="keyword">is</span> random
    * <span class="type">Consensus</span> <span class="keyword">in</span> <span class="type">BitCoin</span>: legal identity <span class="keyword">ref</span>: https://zh.wikipedia.org/wiki/%<span class="type">E5</span>%<span class="number">85</span>%<span class="type">B1</span>%<span class="type">E8</span>%<span class="type">AD</span>%<span class="number">98</span>%<span class="type">E6</span>%<span class="type">A9</span>%<span class="number">9</span>F%<span class="type">E5</span>%<span class="number">88</span>%<span class="type">B6</span>
    * <span class="type">Possible</span> <span class="type">Attack</span>
        * double spending attack: longest valid chain
        * sybil attack
        * forking attack: six confirmation
        * selfish mining
* <span class="type">Principle</span> <span class="keyword">in</span> <span class="type">Designing</span> <span class="type">Bitcoin</span>
    * simple,robust but <span class="keyword">not</span> efficient
* ref1: https://youtu.be/<span class="number">5</span>fSOd431l6A
* ref2: https://bitcoin.org/bitcoin.pdf
</code></pre><h2 id="Ethereum">Ethereum</h2><pre><code>* <span class="type">Block</span> <span class="type">Chain</span> <span class="type">Version</span> <span class="number">2</span>.<span class="number">0</span>
* <span class="type">Smart</span> <span class="type">Contract</span>
    * <span class="type">What</span> <span class="keyword">is</span> <span class="type">Smart</span> <span class="type">Contract</span>? 
        * <span class="type">Smart</span> <span class="type">Contract</span> <span class="keyword">is</span> a piece <span class="keyword">of</span> code running <span class="keyword">in</span> <span class="type">Block</span> <span class="type">Chain</span>. <span class="type">The</span> code defines the content <span class="keyword">of</span> contract. (by <span class="type">ZhenXiao</span>)
        * A smart contract <span class="keyword">is</span> a computer protocol intended to digitally facilitate, verify, <span class="keyword">or</span> enforce the negotiation <span class="keyword">or</span> performance <span class="keyword">of</span> a contract. <span class="type">Smart</span> contracts allow the performance <span class="keyword">of</span> credible transactions <span class="keyword">without</span> third parties. <span class="type">These</span> transactions are trackable <span class="keyword">and</span> irreversible.
        <span class="keyword">ref</span>:https://en.wikipedia.org/wiki/<span class="type">Smart_contract</span>
    * smart contract account: nonce(count number <span class="keyword">of</span> transaction);balance;storageRoot(datastructure:<span class="type">MPT</span>);codeHash
* <span class="type">EVM</span>(<span class="type">Ethereum</span> <span class="type">Virtual</span> <span class="type">Machine</span>)
    * <span class="type">Goal</span>: <span class="type">Enforce</span> <span class="type">Consistency</span>. <span class="type">Just</span> like <span class="type">JVM</span>.
    * <span class="type">What</span> <span class="keyword">is</span> <span class="type">EVM</span>?
        <span class="type">The</span> <span class="type">Ethereum</span> <span class="type">Virtual</span> <span class="type">Machine</span> (<span class="type">EVM</span>) <span class="keyword">is</span> a powerful, sandboxed virtual stack embedded within each full <span class="type">Ethereum</span> node, responsible <span class="keyword">for</span> executing contract bytecode. <span class="type">Contracts</span> are typically written <span class="keyword">in</span> higher level languages, like <span class="type">Solidity</span>, then compiled to <span class="type">EVM</span> bytecode.
    * <span class="type">Process</span>
        * <span class="type">Smart</span> contracts are often written <span class="keyword">in</span> a programming language(<span class="type">Solidity</span>,<span class="type">Vyper</span>,<span class="type">Bamboo</span>;<span class="type">Serpent</span>,<span class="type">Mutan</span>).
        * <span class="type">Smart</span> contract languages like <span class="type">Solidity</span> cannot be executed by the <span class="type">EVM</span> directly. <span class="type">Instead</span>, they are compiled to low-level machine instructions (called opcodes).
    * <span class="type">Opcodes</span>
        * <span class="type">Stack</span>-manipulating opcodes (<span class="type">POP</span>, <span class="type">PUSH</span>, <span class="type">DUP</span>, <span class="type">SWAP</span>)
        * <span class="type">Arithmetic</span>/comparison/bitwise opcodes (<span class="type">ADD</span>, <span class="type">SUB</span>, <span class="type">GT</span>, <span class="type">LT</span>, <span class="type">AND</span>, <span class="type">OR</span>)
        * <span class="type">Environmental</span> opcodes (<span class="type">CALLER</span>, <span class="type">CALLVALUE</span>, <span class="type">NUMBER</span>)
        * <span class="type">Memory</span>-manipulating opcodes (<span class="type">MLOAD</span>, <span class="type">MSTORE</span>, <span class="type">MSTORE8</span>, <span class="type">MSIZE</span>)
        * <span class="type">Storage</span>-manipulating opcodes (<span class="type">SLOAD</span>, <span class="type">SSTORE</span>)
        * <span class="type">Program</span> counter related opcodes (<span class="type">JUMP</span>, <span class="type">JUMPI</span>, <span class="type">PC</span>, <span class="type">JUMPDEST</span>)
        * <span class="type">Halting</span> opcodes (<span class="type">STOP</span>, <span class="type">RETURN</span>, <span class="type">REVERT</span>, <span class="type">INVALID</span>, <span class="type">SELFDESTRUCT</span>)
    * <span class="type">Bytecode</span>
        * <span class="type">In</span> order to efficiently store opcodes, they are encoded to bytecode. <span class="type">Every</span> opcode <span class="keyword">is</span> allocated a byte (<span class="keyword">for</span> example; <span class="type">STOP</span> <span class="keyword">is</span> <span class="number">0x00</span>). 
    * <span class="keyword">ref</span> https://medium.com/mycrypto/the-ethereum-virtual-machine-how-does-it-work-<span class="number">9</span>abac2b7c9e
* <span class="type">State</span> <span class="type">Transition</span> <span class="keyword">in</span> <span class="type">Ethereum</span>
    <span class="type">The</span> <span class="type">Ethereum</span> state transition function, <span class="type">APPLY</span>(S,<span class="type">TX</span>) -&gt; S' can be defined <span class="keyword">as</span> follows:
    <span class="number">1</span>. <span class="type">Check</span> <span class="keyword">if</span> the transaction <span class="keyword">is</span> well-formed (ie. has the right number <span class="keyword">of</span> values), the signature <span class="keyword">is</span> valid,
    <span class="keyword">and</span> the nonce matches the nonce <span class="keyword">in</span> the sender's account. <span class="type">If</span> <span class="keyword">not</span>, <span class="keyword">return</span> an error.
    <span class="number">2</span>. <span class="type">Calculate</span> the transaction fee <span class="keyword">as</span> <span class="type">STARTGAS</span> * <span class="type">GASPRICE</span>, <span class="keyword">and</span> determine the sending address <span class="keyword">from</span>
    the signature. <span class="type">Subtract</span> the fee <span class="keyword">from</span> the sender's account balance <span class="keyword">and</span> increment the sender's
    nonce. <span class="type">If</span> there <span class="keyword">is</span> <span class="keyword">not</span> enough balance to spend, <span class="keyword">return</span> an error.
    <span class="number">3</span>. <span class="type">Initialize</span> <span class="type">GAS</span> = <span class="type">STARTGAS</span>, <span class="keyword">and</span> take off a certain quantity <span class="keyword">of</span> gas per byte to pay <span class="keyword">for</span> the bytes <span class="keyword">in</span>
    the transaction.
    <span class="number">4</span>. <span class="type">Transfer</span> the transaction value <span class="keyword">from</span> the sender's account to the receiving account. <span class="type">If</span> the receiving
    account does <span class="keyword">not</span> yet exist, create it. <span class="type">If</span> the receiving account <span class="keyword">is</span> a contract, run the contract's code
    either to completion <span class="keyword">or</span> until the execution runs <span class="keyword">out</span> <span class="keyword">of</span> gas.
    <span class="number">5</span>. <span class="type">If</span> the value transfer failed because the sender did <span class="keyword">not</span> have enough money, <span class="keyword">or</span> the code execution
    ran <span class="keyword">out</span> <span class="keyword">of</span> gas, revert all state changes <span class="keyword">except</span> the payment <span class="keyword">of</span> the fees, <span class="keyword">and</span> add the fees to the
    miner's account.
    <span class="number">6</span>. <span class="type">Otherwise</span>, refund the fees <span class="keyword">for</span> all remaining gas to the sender, <span class="keyword">and</span> send the fees paid <span class="keyword">for</span> gas
    consumed to the miner.
    * <span class="keyword">ref</span>: https://blockchainlab.com/pdf/<span class="type">Ethereum_white_paper</span>-a_next_generation_smart_contract_and_decentralized_application_platform-vitalik-buterin.pdf
* <span class="type">State</span> <span class="type">Management</span>
    * <span class="type">Ethereum</span> <span class="keyword">is</span> a state machine based on the transaction.
    * <span class="type">The</span> state <span class="keyword">in</span> <span class="type">Ethereum</span> actually <span class="keyword">is</span> data store locally <span class="keyword">in</span> form <span class="keyword">of</span> state tries.
    * <span class="type">Account</span>-based ledger (<span class="type">Bitcoin</span>: <span class="type">Transaction</span>-based ledger,<span class="type">UTXO</span>) 
    * externally owned account: nonce(count number <span class="keyword">of</span> <span class="keyword">using</span> the account);balance;
    * smart contract account: nonce(count number <span class="keyword">of</span> transaction);balance;storageRoot(datastructure:<span class="type">MPT</span>);codeHash
    * three tries local 
        * state trie
        * transaction trie
        * receipt trie
    * structure <span class="keyword">in</span> three tries 
        * data storage <span class="keyword">in</span> (key,value)
        * state trie:key - address <span class="keyword">of</span> ethereum;<span class="number">160</span> bits; value - <span class="type">RLP</span>(nonce;balance;storageRoot;codeHash)
        * <span class="type">MPT</span> <span class="keyword">and</span> bloom filter.
    * <span class="type">Some</span> <span class="type">Terminology</span>
        * <span class="type">MPT</span>:<span class="type">Merkle</span> <span class="type">Patricia</span> <span class="type">Tree</span>/<span class="type">Trie</span>(compressed hash <span class="type">pointer</span> retrieval)
        * <span class="type">RLP</span>：<span class="type">Recursive</span> <span class="type">Length</span> <span class="type">Prefix</span>(<span class="keyword">method</span> <span class="keyword">of</span> <span class="type">Serialization</span>:nested <span class="type">array</span> <span class="keyword">of</span> bytes)
* <span class="type">Possible</span> <span class="type">Attack</span>
    * <span class="type">Re</span>-entrancy <span class="type">Attack</span>: clear state first!
* ref1: https://github.com/ethereum/wiki/wiki/<span class="type">White</span>-<span class="type">Paper</span>
* ref2: https://ethereum.github.io/yellowpaper/paper.pdf
* ref3: https://solidity.readthedocs.io/en/v0.<span class="number">4</span>.<span class="number">24</span>/index.html
</code></pre><h2 id="cosmos">cosmos</h2><pre><code>* Why cosmos?
    * Goal <span class="operator">of</span> cosmos: solve <span class="operator">the</span> prolem <span class="operator">of</span> application <span class="operator">of</span> high speed transaction <span class="operator">and</span> high throughout.
    * Bitcoin 
        * disadvantage1: Script language - Scrypt cannot <span class="built_in">do</span> complex thing,such <span class="keyword">as</span> decentralized predict market.
        * disadvantage2: speed <span class="operator">of</span> handle transaction is slow: about <span class="number">7</span> txs/<span class="keyword">second</span>.
    * Ethereum 
        * disadvantage1: Solidity language is apt <span class="built_in">to</span> have mistakes <span class="operator">and</span> being attacked.
        * disadvantage2: speed <span class="operator">of</span> handle transaction is slow: about <span class="number">15</span> txs/<span class="keyword">second</span>.
        * disadvantage3: smart contract is hard <span class="built_in">to</span> upgrade.
* Tendermint: Cosmos consensus algorithm (ref <span class="keyword">https</span>://github.com/tendermint/tendermint)
    * Goal <span class="operator">of</span> Tendermint: born <span class="operator">in</span> <span class="number">2014</span>, <span class="built_in">to</span> solve <span class="operator">the</span> problem <span class="operator">of</span> speed, scalability <span class="operator">and</span> enrvironment <span class="operator">of</span> PoW consensus.
    * Idea <span class="operator">of</span> Tendermint 
        * Add Validator,voting power(<span class="operator">in</span> <span class="operator">a</span> PoS application such <span class="keyword">as</span> <span class="operator">the</span> Comos Hub,<span class="operator">the</span> voting power may be determined <span class="keyword">by</span> <span class="operator">the</span> amount <span class="operator">of</span> staking tokens bonded <span class="keyword">as</span> collateral)
        * Resist sybil attack <span class="keyword">using</span> Pledge(locked <span class="operator">in</span> blockchain <span class="keyword">system</span>).
        * Vote: Propose,Prevote,Precommit,Commit,NewHeight
    * Feature <span class="operator">of</span> Tendermint
        * application-agnostic: every Blockchain can use.
        * BFT: Byzantine Fault Tolerance.
        * resist sybil attack <span class="keyword">using</span> PoS algorithm.
    * Differences compared <span class="built_in">to</span> Satoshi Nakamoto consensusm,ethash consensus
        * Probability <span class="operator">of</span> being <span class="operator">the</span> canonical chain is <span class="number">100</span>% instead <span class="operator">of</span> high probability.
        * Fixed Validators instead <span class="operator">of</span> <span class="built_in">variable</span> validators.
        * Fixed proposal instead <span class="operator">of</span> no proposal
        * Fixed timeout mechanism
        * disadvantage1: temporary validators cannot be permitted <span class="built_in">to</span> quit <span class="operator">or</span> enter.
        * disadvantage2: <span class="keyword">system</span> shuold maitain <span class="operator">a</span> same timing <span class="keyword">system</span>
    * performance <span class="operator">of</span> Tendermint
        * block <span class="built_in">time</span> can be <span class="number">1</span> <span class="keyword">second</span>, speed <span class="operator">of</span> transaction: <span class="number">1000</span>txs/<span class="keyword">second</span>
        * Finality is immediate <span class="keyword">if</span> there is less than <span class="number">1</span>/<span class="number">3</span> validators <span class="operator">in</span> <span class="keyword">system</span>.
* Inter Blockchain Communication(IBC)
    * The Hub <span class="operator">and</span> zones communicate <span class="operator">with</span> <span class="keyword">each</span> other. 
    * To move <span class="operator">a</span> packet <span class="built_in">from</span> <span class="constant">one</span> blockchain <span class="built_in">to</span> another:
        * <span class="operator">a</span> proof is posted <span class="command"><span class="keyword">on</span> <span class="title">the</span> <span class="title">receiving</span> <span class="title">chain</span>. </span>
        * The proof states that <span class="operator">the</span> sending chain published <span class="operator">a</span> packet <span class="keyword">for</span> <span class="operator">the</span> alleged destination. 
        * For <span class="operator">the</span> receiving chain <span class="built_in">to</span> check this proof, <span class="keyword">it</span> must be able keep up <span class="operator">with</span> <span class="operator">the</span> sender’s block headers. 
        * This mechanism is similar <span class="built_in">to</span> that used <span class="keyword">by</span> sidechains, which requires <span class="constant">two</span> interacting chains <span class="built_in">to</span> be aware <span class="operator">of</span> <span class="constant">one</span> another via <span class="operator">a</span> bidirectional stream <span class="operator">of</span> proof-<span class="operator">of</span>-existence datagrams (transactions).
    * The IBC protocol can naturally be defined <span class="keyword">using</span> <span class="constant">two</span> types <span class="operator">of</span> transactions: 
        * IBCBlockCommitTx transaction: allows <span class="operator">a</span> blockchain <span class="built_in">to</span> prove <span class="built_in">to</span> <span class="keyword">any</span> observer <span class="operator">of</span> its most recent block-hash.
        * IBCPacketTx transaction: allows <span class="operator">a</span> blockchain <span class="built_in">to</span> prove <span class="built_in">to</span> <span class="keyword">any</span> observer that <span class="operator">the</span> given packet was indeed published <span class="keyword">by</span> <span class="operator">the</span> sender’s application, via <span class="operator">a</span> Merkle-proof <span class="built_in">to</span> <span class="operator">the</span> recent block-hash.
* Application Blockchain Interface (ABCI) 
    * Blockchains are systems <span class="keyword">for</span> multi-master state machine replication. ABCI is <span class="operator">an</span> interface that defines <span class="operator">the</span> boundary between <span class="operator">the</span> replication engine (<span class="operator">the</span> blockchain), <span class="operator">and</span> <span class="operator">the</span> state machine (<span class="operator">the</span> application). Using <span class="operator">a</span> <span class="built_in">socket</span> protocol, <span class="operator">a</span> consensus engine running <span class="operator">in</span> <span class="constant">one</span> <span class="built_in">process</span> can manage <span class="operator">an</span> application state running <span class="operator">in</span> another.
    * ABCI allows <span class="keyword">for</span> blockchain applications <span class="built_in">to</span> be programmed <span class="operator">in</span> <span class="keyword">any</span> language, <span class="operator">not</span> just <span class="operator">the</span> programming language that <span class="operator">the</span> consensus engine is written <span class="operator">in</span>. 
    * Additionally, ABCI makes <span class="keyword">it</span> possible <span class="built_in">to</span> easily swap out <span class="operator">the</span> consensus layer <span class="operator">of</span> <span class="keyword">any</span> existing blockchain stack.
    * Example <span class="operator">of</span> Bitcoin: <span class="operator">the</span> ABCI application would be responsible <span class="keyword">for</span>
        * Maintaining <span class="operator">the</span> UTXO database
        * Validating cryptographic signatures <span class="operator">of</span> transactions 
        * Preventing transactions <span class="built_in">from</span> spending non-existent funds 
        * Allowing clients <span class="built_in">to</span> query <span class="operator">the</span> UTXO database
    * ref <span class="keyword">https</span>://github.com/tendermint/abci

* ref1: <span class="keyword">https</span>://cosmos.network/cosmos-whitepaper.pdf
* ref2: <span class="keyword">https</span>://ethfans.org/posts/how-does-cosmos-work-part1
</code></pre><h2 id="consensus">consensus</h2><pre><code>* Proof-of-Work(PoW)
    * Disadvantage
        * energe: electric power is wasted.
        * mining pool: decentralization is changing to centralization.
* Proof-of-stake(PoS) 
    * What is Proof of stake(PoS)?
        PoS is a method of securing a cryptocurrency network through requesting users to <span class="operator"><span class="keyword">show</span> ownership <span class="keyword">of</span> a certain amount <span class="keyword">of</span> currency.
    * Idea
        * <span class="keyword">add</span> validators(token <span class="keyword">as</span> pledge:determine the probability <span class="keyword">of</span> chosen <span class="keyword">as</span> validator)
        * mining block <span class="comment">---&gt; Minting/Forging</span>
    * advantages
        * cheap:decentralization
        * electric <span class="keyword">power</span> <span class="keyword">is</span> less
    * disadvantages
        * <span class="number">51</span>% attack: richer man become richer. Solve <span class="keyword">by</span>:froze currency used <span class="keyword">for</span> <span class="keyword">choose</span> validator <span class="keyword">for</span> <span class="keyword">some</span> <span class="keyword">time</span>.
        * refuse <span class="keyword">to</span> be a validator. Solved <span class="keyword">by</span>: <span class="keyword">choose</span> more validators.
    * ref: https://en.bitcoinwiki.org/wiki/Proof-<span class="keyword">of</span>-stake
* Delegated Proof <span class="keyword">of</span> Stake (DPoS) 
    * Whast <span class="keyword">is</span> DPoS?
        * DPoS <span class="keyword">is</span> a consensus algorithm developed <span class="keyword">to</span> secure a blockchain <span class="keyword">by</span> ensuring representation <span class="keyword">of</span> transactions within it.
        * DPoS <span class="keyword">is</span> designed <span class="keyword">as</span> an implementation <span class="keyword">of</span> technology-based democracy, <span class="keyword">using</span> voting <span class="keyword">and</span> election process <span class="keyword">to</span> protect blockchain <span class="keyword">from</span> centralization <span class="keyword">and</span> malicious <span class="keyword">usage</span>.
    * advantages
        * DPoS coins <span class="keyword">are</span> much more scalable than <span class="keyword">POW</span> cryptocurrencies <span class="keyword">as</span> they never <span class="keyword">start</span> requiring high computing <span class="keyword">power</span> <span class="keyword">and</span> <span class="keyword">are</span> generally approachable <span class="keyword">for</span> users <span class="keyword">with</span> poor equipment.
        * DPoS blockchains showed themselves <span class="keyword">to</span> be faster than <span class="keyword">PoW</span> <span class="keyword">and</span> PoS-based blockchains.
        * DPoS coins <span class="keyword">are</span> more democratic <span class="keyword">and</span> inclusive than their alternatives. DPoS vs PoS offers more governance <span class="keyword">power</span> <span class="keyword">to</span> users <span class="keyword">with</span> small stakes, * DPoS vs <span class="keyword">PoW</span> does <span class="keyword">not</span> require <span class="keyword">as</span> much computing <span class="keyword">power</span> <span class="keyword">and</span>, therefore, <span class="keyword">is</span> <span class="keyword">not</span> so financially demanding <span class="keyword">on</span> the <span class="keyword">user</span>.
        <span class="keyword">As</span> threshold <span class="keyword">to</span> enter <span class="keyword">is</span> very low, DPoS <span class="keyword">is</span> largely considered <span class="keyword">to</span> be the most decentralized approach <span class="keyword">to</span> consensus mechanism.
        * DPoS <span class="keyword">is</span> energy efficient <span class="keyword">and</span> environmentally friendly.
        * DPoS networks have strong protection <span class="keyword">from</span> <span class="keyword">double</span> spend attack.
    * disadvantages
        * Successful existence <span class="keyword">of</span> the network requires participation <span class="keyword">and</span> coordination <span class="keyword">of</span> genuinely interested community <span class="keyword">for</span> effective governance <span class="keyword">of</span> the panel <span class="keyword">of</span> witnesses <span class="keyword">by</span> voting them <span class="keyword">in</span> <span class="keyword">and</span> out.
        * DPoS systems <span class="keyword">are</span> vulnerable <span class="keyword">to</span> centralization <span class="keyword">as</span> a <span class="built_in">number</span> <span class="keyword">of</span> witnesses <span class="keyword">is</span> strictly limited.
        * DPoS blockchain <span class="keyword">is</span> exposed <span class="keyword">to</span> flaws <span class="keyword">of</span> classic <span class="built_in">real</span>-life voting. <span class="keyword">For</span> example, DPoS users <span class="keyword">with</span> small stakes can decide that their vote doesn<span class="string">'t matter in comparison with votes of bigger stakeholders.
* ref1: https://zh.wikipedia.org/wiki/%E5%85%B1%E8%AD%98%E6%A9%9F%E5%88%B6</span></span>
</code></pre><p>待更新：</p>
<h2 id="True_Chain">True Chain</h2><ol>
<li><p>Byzantine fault-tolerant (BFT)<br> 在分布式计算机网络中，如果存在故障和恶意节点，是否能够保持正常节点的网络一致性问题。</p>
</li>
<li><p>兰伯特 不考虑网络延时的情况下，恶意人数m，总人数n，当n&gt;3m时这个是可解的，n&lt;3m不可解。</p>
</li>
<li>PBFT：在有网络延情况下，可以解决BFT问题。</li>
<li>工作量证明（Proof-of-Work，PoW），典型案例：比特币网络。增加了恶意节点的成本，计算一个puzzle。</li>
<li>权益证明（Proof-of-Stake，PoS，又译持有量证明），典型案例：以太坊。</li>
<li>股份授权证明（Delegated-Proof-of-Stake，DPoS），典型案例：EOS</li>
<li>容量证明（Proof-of-space，PoSpace，又称 Proof-of-Capacity，PoC）典型案例：Filecoin</li>
<li>Paxos</li>
<li>RAFT</li>
<li>PBFT</li>
<li>LibraBFT（Byzantine fault-tolerance）：Libra上使用。</li>
<li>Hybrid Consensus: Efficient Consensus in the Permissionless Model by Rafael Pass and Elaine Shi</li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives">archives</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#BitCoin_Basis"><span class="toc-number">1.</span> <span class="toc-text">BitCoin Basis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Ethereum"><span class="toc-number">2.</span> <span class="toc-text">Ethereum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cosmos"><span class="toc-number">3.</span> <span class="toc-text">cosmos</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#consensus"><span class="toc-number">4.</span> <span class="toc-text">consensus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#True_Chain"><span class="toc-number">5.</span> <span class="toc-text">True Chain</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&text=The Story of Block Chain"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&is_video=false&description=The Story of Block Chain"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=The Story of Block Chain&body=Check out this article: http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&title=The Story of Block Chain"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://www.atopos.cc/2020/02/07/Story of Block Chain_Release/&name=The Story of Block Chain&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 DengShizhi
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives">archives</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-101731332-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
